======================================================================
   CSIGMA PLATINUM - RELATORIO TECNICO DE COMPILACAO
   Data: 15/01/2026 10:08:18
   Fonte: exemplos/calculadora.sig
======================================================================

[FASE 1] ANALISE LEXICA (Scanner):
----------------------------------------------------------------------
  Token: [PRINT       ] | Literal: "print"
  Token: [STRING      ] | Literal: "Calculadora"
  Token: [PRINT       ] | Literal: "print"
  Token: [STRING      ] | Literal: "Conta mista: (a + b) * 2 / C"
  Token: [VAR         ] | Literal: "var"
  Token: [IDENT       ] | Literal: "a"
  Token: [=           ] | Literal: "="
  Token: [INT         ] | Literal: "0"
  Token: [VAR         ] | Literal: "var"
  Token: [IDENT       ] | Literal: "b"
  Token: [=           ] | Literal: "="
  Token: [INT         ] | Literal: "0"
  Token: [VAR         ] | Literal: "var"
  Token: [IDENT       ] | Literal: "c"
  Token: [=           ] | Literal: "="
  Token: [INT         ] | Literal: "0"
  Token: [VAR         ] | Literal: "var"
  Token: [IDENT       ] | Literal: "res"
  Token: [=           ] | Literal: "="
  Token: [INT         ] | Literal: "0"
  Token: [PRINT       ] | Literal: "print"
  Token: [STRING      ] | Literal: "Valor de a:"
  Token: [INPUT       ] | Literal: "input"
  Token: [IDENT       ] | Literal: "a"
  Token: [PRINT       ] | Literal: "print"
  Token: [STRING      ] | Literal: "Valor de b:"
  Token: [INPUT       ] | Literal: "input"
  Token: [IDENT       ] | Literal: "b"
  Token: [PRINT       ] | Literal: "print"
  Token: [STRING      ] | Literal: "Valor de c:"
  Token: [INPUT       ] | Literal: "input"
  Token: [IDENT       ] | Literal: "c"
  Token: [IDENT       ] | Literal: "res"
  Token: [=           ] | Literal: "="
  Token: [IDENT       ] | Literal: "a"
  Token: [+           ] | Literal: "+"
  Token: [IDENT       ] | Literal: "b"
  Token: [*           ] | Literal: "*"
  Token: [INT         ] | Literal: "2"
  Token: [/           ] | Literal: "/"
  Token: [IDENT       ] | Literal: "c"
  Token: [PRINT       ] | Literal: "print"
  Token: [STRING      ] | Literal: "Resultado final:"
  Token: [PRINT       ] | Literal: "print"
  Token: [IDENT       ] | Literal: "res"
  Token: [EOF         ] | Literal: ""

[FASE 2] ANALISE SINTATICA (Dump da AST):
----------------------------------------------------------------------
  [00] PRINT:       "Calculadora" (String: true)
  [01] PRINT:       "Conta mista: (a + b) * 2 / C" (String: true)
  [02] DECLARACAO:  Var a = 0
  [03] DECLARACAO:  Var b = 0
  [04] DECLARACAO:  Var c = 0
  [05] DECLARACAO:  Var res = 0
  [06] PRINT:       "Valor de a:" (String: true)
  [07] INPUT:       Ler para variavel a
  [08] PRINT:       "Valor de b:" (String: true)
  [09] INPUT:       Ler para variavel b
  [10] PRINT:       "Valor de c:" (String: true)
  [11] INPUT:       Ler para variavel c
  [12] CALCULO:     res = a + b * 2 / c
  [13] PRINT:       "Resultado final:" (String: true)
  [14] PRINT:       "res" (String: false)

[FASE 3] GERACAO DE CODIGO (Assembly x86_64):
----------------------------------------------------------------------
section .data
    fmt_in db '%ld', 0                  ; Scanf
    fmt_out_num db '%ld', 10, 0         ; Printf
    msg_0                db 'Calculadora', 10, 0
    msg_1                db 'Conta mista: (a + b) * 2 / C', 10, 0
    a                    dq 0           ; Variavel a
    b                    dq 0           ; Variavel b
    c                    dq 0           ; Variavel c
    res                  dq 0           ; Variavel res
    msg_2                db 'Valor de a:', 10, 0
    msg_3                db 'Valor de b:', 10, 0
    msg_4                db 'Valor de c:', 10, 0
    msg_5                db 'Resultado final:', 10, 0

section .text
extern printf, scanf
global main

main:
    push rbp
    mov rbp, rsp
    sub rsp, 32

    lea rdi, [msg_0]
    xor eax, eax
    call printf
    lea rdi, [msg_1]
    xor eax, eax
    call printf
    lea rdi, [msg_2]
    xor eax, eax
    call printf
    lea rdi, [fmt_in]
    lea rsi, [a]
    xor eax, eax
    call scanf
    lea rdi, [msg_3]
    xor eax, eax
    call printf
    lea rdi, [fmt_in]
    lea rsi, [b]
    xor eax, eax
    call scanf
    lea rdi, [msg_4]
    xor eax, eax
    call printf
    lea rdi, [fmt_in]
    lea rsi, [c]
    xor eax, eax
    call scanf

    ; --- Calculo de res ---
    mov rax, [a]
    add rax, [b]                      
    imul rax, 2                       
    mov rbx, [c]                      
    xor rdx, rdx
    idiv rbx
    mov [res], rax
    lea rdi, [msg_5]
    xor eax, eax
    call printf
    lea rdi, [fmt_out_num]
    mov rsi, [res]
    xor eax, eax
    call printf

    add rsp, 32
    pop rbp
    mov rax, 0
    ret

----------------------------------------------------------------------
  > [OK] Arquivo 'output.asm' gravado no disco.

[FASE 4] MONTAGEM E LINKAGEM (NASM & GCC):
----------------------------------------------------------------------
  > Executando NASM... OK.
  > Executando GCC...  OK.

======================================================================
   RESULTADO FINAL: ./calculadora
   Log gerado em:   exemplos/calculadora.log
======================================================================
